<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/uploads/favicion32*32.ico?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/uploads/favicion16*16.ico?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="-Greenplum," />










<meta name="keywords" content="-Greenplum">
<meta property="og:type" content="article">
<meta property="og:title" content="CentOS 6.9 ��GreenPlumԴ����밲װ������̳�">
<meta property="og:url" content="http://www.yzmean.site/post/6398/index.html">
<meta property="og:site_name" content="Yuan Zi&#39;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://wx4.sinaimg.cn/large/006kIAZaly1fq30eco3hgj30f8058js8.jpg">
<meta property="og:updated_time" content="2018-04-09T02:40:11.527Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CentOS 6.9 ��GreenPlumԴ����밲װ������̳�">
<meta name="twitter:image" content="http://wx4.sinaimg.cn/large/006kIAZaly1fq30eco3hgj30f8058js8.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.3',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.yzmean.site/post/6398/"/>





  <title>CentOS 6.9 ��GreenPlumԴ����밲װ������̳� | Yuan Zi's Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-107904573-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1dc9a4ff6dd7709198eff258b865fca8";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>
    

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Yuan Zi's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">谦虚使人进步</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      
        
        <li class="menu-item menu-item-random-picture">
          <a href="https://source.unsplash.com/random" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            Random Picture
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.yzmean.site/post/6398/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Yuan Zi">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/head.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yuan Zi's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">CentOS 6.9 ��GreenPlumԴ����밲װ������̳�</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-04-09T10:40:11+08:00">
                2018-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GreenPlumѧϰ/" itemprop="url" rel="index">
                    <span itemprop="name">GreenPlumѧϰ</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/post/6398/" class="leancloud_visitors" data-flag-title="CentOS 6.9 ��GreenPlumԴ����밲װ������̳�">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="http://wx4.sinaimg.cn/large/006kIAZaly1fq30eco3hgj30f8058js8.jpg" alt=""><br><a id="more"></a></p>
<h1 id="GreenPlum����"><a href="#GreenPlum����" class="headerlink" title="GreenPlum����"></a>GreenPlum����</h1><h2 id="PostgreSql"><a href="#PostgreSql" class="headerlink" title="PostgreSql"></a>PostgreSql</h2><p>PostgreSQL is an advanced object-relational database management system that supports an extended subset of the SQL standard, including transactions, foreign keys, subqueries, triggers, user-defined types and functions.  This distribution also contains C language bindings.</p>
<h2 id="GreenPlum"><a href="#GreenPlum" class="headerlink" title="GreenPlum"></a>GreenPlum</h2><p>The Greenplum Database (GPDB) is an advanced, fully featured, open source data warehouse. It provides powerful and rapid analytics on petabyte scale data volumes. Uniquely geared toward big data analytics, Greenplum Database is powered by the world��s most advanced cost-based query optimizer delivering high analytical query performance on large data volumes.<br>Greenplum �ǻ��� PostgreSQL �����ģ��﷨�� PostgreSQL ����һ����<br>�����ϣ�Greenplum ��һ����ϵ�����ݿ⼯Ⱥ���ɶ�����������ݿ������ �ϳɵ��߼����ݿ⣬�����û���˵ Greenplum �� Oracle��PostgreSQL ���޲�ͬ�� ������ͨ����׼ SQL �������ݽ��з��ʡ�</p>
<h1 id="GreenPlumԴ����밲װ"><a href="#GreenPlumԴ����밲װ" class="headerlink" title="GreenPlumԴ����밲װ"></a>GreenPlumԴ����밲װ</h1><p>��CentOS 6.9Ϊ�������ص�ַΪ<a href="http://mirrors.aliyun.com/centos/6.9/isos/x86_64/" target="_blank" rel="external">�����ƾ���</a>��</p>
<p>CentOS-6.9-x86_64-bin-DVD1.iso<br>CentOS-6.9-x86_64-bin-DVD2.iso </p>
<p>ǿ�ҽ�����gpadminΪ�û�����</p>
<h2 id="׼������"><a href="#׼������" class="headerlink" title="׼������"></a>׼������</h2><h3 id="����u�rootE��"><a href="#����u�rootE��" class="headerlink" title="����û�rootȨ��"></a>����û�rootȨ��</h3><p>vim �� /etc/sudoers �ļ� ����rootȨ�޴򿪣�<br>�ҵ���������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">## Allow root to run any commands anywhere</div><div class="line">root    ALL=(ALL)       ALL</div></pre></td></tr></table></figure></p>
<p>������һ�����<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpadmin ALL=(ALL)       ALL #ע�����</div></pre></td></tr></table></figure></p>
<p>���沢���ؼ���</p>
<h3 id="��װgcc-c"><a href="#��װgcc-c" class="headerlink" title="��װgcc-c++"></a>��װgcc-c++</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum install gcc-c++</div></pre></td></tr></table></figure>
<h3 id="��װgit"><a href="#��װgit" class="headerlink" title="��װgit"></a>��װgit</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum install git</div></pre></td></tr></table></figure>
<h3 id="��װcmake"><a href="#��װcmake" class="headerlink" title="��װcmake"></a>��װcmake</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin</div><div class="line">wget https://cmake.org/files/v3.5/cmake-3.5.2.tar.gz</div><div class="line">tar -zxvf cmake-3.5.2.tar.gz</div><div class="line">cd cmake-3.5.2</div><div class="line">./configure --prefix=/usr/local</div><div class="line">make</div><div class="line">sudo make install</div></pre></td></tr></table></figure>
<h3 id="��װpip"><a href="#��װpip" class="headerlink" title="��װpip"></a>��װpip</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo yum -y install epel-release</div><div class="line">sudo yum -y install python-pip</div><div class="line">pip install --upgrade #pip�汾����Ϊ 7.x.x</div></pre></td></tr></table></figure>
<h3 id="ȷ���Ѱ�װ�����pythong��"><a href="#ȷ���Ѱ�װ�����pythong��" class="headerlink" title="ȷ���Ѱ�װ�����pythonģ��"></a>ȷ���Ѱ�װ�����pythonģ��</h3><ul>
<li>psutil</li>
<li>lockfile (&gt;= 0.9.1)</li>
<li>paramiko</li>
<li>setuptools</li>
</ul>
<h3 id="ȷ����̬���ӿ⹲��"><a href="#ȷ����̬���ӿ⹲��" class="headerlink" title="ȷ����̬���ӿ⹲��"></a>ȷ����̬���ӿ⹲��</h3><p>��� /usr/local/lib  �� /usr/local/lib64 �� /etc/ld.so.conf ��<br>����������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ldconfig</div></pre></td></tr></table></figure></p>
<h3 id="֧��-c-11"><a href="#֧��-c-11" class="headerlink" title="֧�� c++11"></a>֧�� c++11</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo yum install -y centos-release-scl</div><div class="line">sudo yum install -y devtoolset-6-toolchain</div><div class="line">echo &apos;source scl_source enable devtoolset-6&apos; &gt;&gt; ~/.bashrc</div><div class="line">source ~/.bashrc</div></pre></td></tr></table></figure>
<h3 id="��װ����"><a href="#��װ����" class="headerlink" title="��װ����"></a>��װ����</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo yum -y install gcc git apr bison flex  readline gcc-c++ curl-devel bzip2-devel python-devel readline-devel apr-devel libevent-devel openssl-devel perl-ExtUtils-Embed libxml2-devel openldap-devel pam pam-devel</div></pre></td></tr></table></figure>
<h2 id="��װGPORCA"><a href="#��װGPORCA" class="headerlink" title="��װGPORCA"></a>��װGPORCA</h2><h3 id="clone-GPORCA"><a href="#clone-GPORCA" class="headerlink" title="clone GPORCA"></a>clone GPORCA</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin</div><div class="line">git clone https://github.com/greenplum-db/gporca.git</div></pre></td></tr></table></figure>
<h3 id="��װ-gp-xerces"><a href="#��װ-gp-xerces" class="headerlink" title="��װ gp-xerces"></a>��װ gp-xerces</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/greenplum-db/gp-xerces.git</div><div class="line">cd gp-xerces</div><div class="line">mkdir build</div><div class="line">cd build</div><div class="line">../configure --prefix=/usr/local</div><div class="line">make</div><div class="line">sudo make install</div></pre></td></tr></table></figure>
<h3 id="��װninja"><a href="#��װninja" class="headerlink" title="��װninja"></a>��װninja</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin</div><div class="line">git clone git://github.com/ninja-build/ninja.git &amp;&amp; cd ninja</div><div class="line">./configure.py --bootstrap</div><div class="line">sudo cp ninja /usr/bin</div></pre></td></tr></table></figure>
<h3 id="���밲װGPORCA"><a href="#���밲װGPORCA" class="headerlink" title="���밲װGPORCA"></a>���밲װGPORCA</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin/gporca</div><div class="line">cmake -GNinja -H. -Bbuild</div><div class="line">sudo ninja install -C build</div></pre></td></tr></table></figure>
<h3 id="����GreenPlum"><a href="#����GreenPlum" class="headerlink" title="����GreenPlum"></a>����GreenPlum</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin</div><div class="line">git clone https://github.com/greenplum-db/gpdb.git</div><div class="line">cd gpdb</div><div class="line">./configure --with-perl --with-python --with-libxml --with-gssapi --prefix=/usr/local/gpdb</div><div class="line"></div><div class="line"># Compile and install</div><div class="line">make -j8</div><div class="line">sudo make -j8 install</div><div class="line"></div><div class="line"># Bring in greenplum environment into your running shell</div><div class="line">source /usr/local/gpdb/greenplum_path.sh</div></pre></td></tr></table></figure>
<p>�����</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Greenplum Database installation complete.</div></pre></td></tr></table></figure>
<p>��˵����װ�ɹ�</p>
<h1 id="����"><a href="#����" class="headerlink" title="����"></a>����</h1><p>����ͬһ̨�����ϵ�һ��master�ڵ��һ��segment�ڵ�Ϊ��</p>
<h2 id="����host�l�"><a href="#����host�l�" class="headerlink" title="����host�ļ�"></a>����host�ļ�</h2><h3 id="�鿴ip"><a href="#�鿴ip" class="headerlink" title="�鿴ip"></a>�鿴ip</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ip addr show eth0</div><div class="line"># ѡ��inet���ip</div></pre></td></tr></table></figure>
<h3 id="�޸�hosts�l�"><a href="#�޸�hosts�l�" class="headerlink" title="�޸�hosts�ļ�"></a>�޸�hosts�ļ�</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/hosts</div></pre></td></tr></table></figure>
<p>�������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;ip&gt; mdw</div><div class="line">&lt;ip&gt; sdw1</div><div class="line">#�˴�ip��ͬ</div></pre></td></tr></table></figure></p>
<h3 id="�޸�network�l�"><a href="#�޸�network�l�" class="headerlink" title="�޸�network�ļ�"></a>�޸�network�ļ�</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/sysconfig/network</div><div class="line">#�޸�   HOSTNAME=mdw</div></pre></td></tr></table></figure>
<h2 id="���������б��l���segment�l�"><a href="#���������б��l���segment�l�" class="headerlink" title="���������б��ļ���segment�ļ�"></a>���������б��ļ���segment�ļ�</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin</div><div class="line">mkdir conf</div><div class="line">cd conf</div><div class="line">sudo vim hostlist</div></pre></td></tr></table></figure>
<p>�����������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mdw</div><div class="line">sdw1</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim seg_hosts</div></pre></td></tr></table></figure>
<p>�����������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sdw1</div></pre></td></tr></table></figure></p>
<h2 id="�����ڴ��������������"><a href="#�����ڴ��������������" class="headerlink" title="�����ڴ��������������"></a>�����ڴ��������������</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/sysctl.conf</div></pre></td></tr></table></figure>
<p>�����滻����������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">net.ipv4.ip_forward = 0</div><div class="line">net.ipv4.conf.default.accept_source_route = 0</div><div class="line">kernel.sysrq = 1</div><div class="line">kernel.core_uses_pid = 1</div><div class="line">net.ipv4.tcp_syncookies = 1</div><div class="line">kernel.msgmnb = 65536</div><div class="line">kernel.msgmax = 65536</div><div class="line">kernel.sem = 250 64000 100 512</div><div class="line">kernel.shmmax = 500000000</div><div class="line">kernel.shmmni = 4096</div><div class="line">kernel.shmall = 4000000000</div><div class="line">kernel.sem = 250 64000 100 512</div><div class="line">net.ipv4.tcp_tw_recycle = 1</div><div class="line">net.ipv4.tcp_max_syn_backlog = 4096</div><div class="line">net.core.netdev_max_backlog = 10000</div><div class="line">vm.overcommit_memory = 2</div><div class="line">net.ipv4.conf.all.arp_filter = 1</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo sysctl -p</div></pre></td></tr></table></figure>
<h2 id="�������V���"><a href="#�������V���" class="headerlink" title="�������Ʋ���"></a>�������Ʋ���</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo vim /etc/security/limits.conf</div></pre></td></tr></table></figure>
<p>�����������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">* soft nofile 65536</div><div class="line">* hard nofile 65536</div><div class="line">* soft nproc 131072</div><div class="line">* hard nproc 131072</div><div class="line">#  �ǺŲ���ȥ��</div></pre></td></tr></table></figure></p>
<h2 id="�ڵ㲿��"><a href="#�ڵ㲿��" class="headerlink" title="�ڵ㲿��"></a>�ڵ㲿��</h2><h3 id="������������"><a href="#������������" class="headerlink" title="������������"></a>������������</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source /usr/local/gpdb/greenplum_path.sh</div></pre></td></tr></table></figure>
<h3 id="�����������½"><a href="#�����������½" class="headerlink" title="�����������½"></a>�����������½</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo pip install psutil</div><div class="line">gpssh-exkeys -f /home/gpadmin/conf/hostlist</div></pre></td></tr></table></figure>
<h3 id="��������L¼"><a href="#��������L¼" class="headerlink" title="��������Ŀ¼"></a>��������Ŀ¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin</div><div class="line">mkdir gpdata</div><div class="line">cd gpdata</div><div class="line">mkdir segmentdata1 masterdata</div></pre></td></tr></table></figure>
<h3 id="������������-1"><a href="#������������-1" class="headerlink" title="������������"></a>������������</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vim ~/.bash_profile</div></pre></td></tr></table></figure>
<p>�����������<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">source /usr/local/gpdb/greenplum_path.sh</div><div class="line">export MASTER_DATA_DIRECTORY=/home/gpadmin/gpdata/masterdata/gpseg-1</div><div class="line">export PGPORT=2345</div><div class="line">export PGDATABASE=testDB</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source ~/.bash_profile</div></pre></td></tr></table></figure>
<h3 id="��д���ݿ�������l�"><a href="#��д���ݿ�������l�" class="headerlink" title="��д���ݿ�������ļ�"></a>��д���ݿ�������ļ�</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /home/gpadmin/conf</div><div class="line">mkdir gpconfigs</div><div class="line">cd gpconfigs</div><div class="line">vim gpinitsystem_config</div></pre></td></tr></table></figure>
<p>�����������</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">#������ļ�����</div><div class="line">ARRAY_NAME=&quot;Greenplum&quot;</div><div class="line">SEG_PREFIX=gpseg</div><div class="line">PORT_BASE=40000</div><div class="line">declare -a DATA_DIRECTORY=(/home/gpadmin/gpdata/segmentdata1 /home/gpadmin/gpdata/segmentdata1)</div><div class="line">MASTER_HOSTNAME=mdw</div><div class="line">MASTER_DIRECTORY=/home/gpadmin/gpdata/masterdata</div><div class="line">##### Port number for the master instance.</div><div class="line">MASTER_PORT=2345</div><div class="line"># #### Shell utility used to connect to remote hosts.</div><div class="line">TRUSTED_SHELL=/usr/bin/ssh</div><div class="line">##### Maximum log file segments between automatic WAL checkpoints.</div><div class="line">CHECK_POINT_SEGMENTS=8</div><div class="line">ENCODING=UNICODE</div><div class="line">#MIRROR_PORT_BASE=50000</div><div class="line">REPLICATION_PORT_BASE=41000</div><div class="line">#MIRROR_REPLICATION_PORT_BASE=51000</div><div class="line">#declare -a MIRROR_DATA_DIRECTORY=(/home/gpadmin/gpdata/segmentmirror1 #/home/gpadmin/gpdata/segmentmirror)</div><div class="line">MACHINE_LIST_FILE=/home/gpadmin/conf/seg_hosts</div></pre></td></tr></table></figure>
<h3 id="��ʼ�����ݿ�"><a href="#��ʼ�����ݿ�" class="headerlink" title="��ʼ�����ݿ�"></a>��ʼ�����ݿ�</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gpinitsystem -c /home/gpadmin/conf/gpconfigs/gpinitsystem_config �Ca</div></pre></td></tr></table></figure>
<h3 id="���ݿ�ʹ��"><a href="#���ݿ�ʹ��" class="headerlink" title="���ݿ�ʹ��"></a>���ݿ�ʹ��</h3><p>gpstart #�������ݿ����<br>gpstop #�ر����ݿ����<br>gprecoverseg  #�ָ���ʧ�ܵĽڵ�<br>gpstate -m #�鿴�ڵ�״̬<br>createdb testDB #�������ݿ�<br>psql #�������ݿ�   psql –help�鿴����ѡ��</p>
<h3 id="TPC-H����"><a href="#TPC-H����" class="headerlink" title="TPC-H����"></a>TPC-H����</h3><p>����Greenplum TPC-H����<br>�ο�<a href="https://yq.aliyun.com/articles/93?commentId=29" target="_blank" rel="external">https://yq.aliyun.com/articles/93?commentId=29</a></p>

      
    </div>
    
    
    


    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div></div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>打赏</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/uploads/wechat.png" alt="Yuan Zi 微信支付"/>
        <p>微信支付</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Greenplum/" rel="tag"># -Greenplum</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/post/63734/" rel="next" title="mac环境下搭建hexo+github pages+next个人博客">
                <i class="fa fa-chevron-left"></i> mac环境下搭建hexo+github pages+next个人博客
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/post/23968/" rel="prev" title="macOS High Sierra下无法使用gdb的解决办法">
                macOS High Sierra下无法使用gdb的解决办法 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
                <!--MOB SHARE BEGIN-->
<div class="-mob-share-ui-button -mob-share-open">分享</div>
<div class="-mob-share-ui" style="display: none">
    <ul class="-mob-share-list">
        <li class="-mob-share-weibo"><p>新浪微博</p></li>
        <li class="-mob-share-tencentweibo"><p>腾讯微博</p></li>
        <li class="-mob-share-qzone"><p>QQ空间</p></li>
        <li class="-mob-share-qq"><p>QQ好友</p></li>
        <li class="-mob-share-renren"><p>人人网</p></li>
        <li class="-mob-share-kaixin"><p>开心网</p></li>
        <li class="-mob-share-douban"><p>豆瓣</p></li>
        <li class="-mob-share-facebook"><p>Facebook</p></li>
        <li class="-mob-share-twitter"><p>Twitter</p></li>
    </ul>
    <div class="-mob-share-close">取消</div>
</div>
<div class="-mob-share-ui-bg"></div>
<script id="-mob-share" src="http://f1.webshare.mob.com/code/mob-share.js?appkey=2188e1e9decc4"></script>
<!--MOB SHARE END-->

      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMTI1Ni83ODA1"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/head.png"
                alt="Yuan Zi" />
            
              <p class="site-author-name" itemprop="name">Yuan Zi</p>
              <p class="site-description motion-element" itemprop="description">I ain't gonna be just a face in the crowd .</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/yzmean" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:yzmean@gmail.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://steamcommunity.com/id/flnoripple" target="_blank" title="Steam">
                    
                      <i class="fa fa-fw fa-steam"></i>Steam</a>
                </span>
              
            
          </div>

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://shic.top/" title="this.Shi个人博客" target="_blank">this.Shi个人博客</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#GreenPlum����"><span class="nav-number">1.</span> <span class="nav-text">GreenPlum����</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#PostgreSql"><span class="nav-number">1.1.</span> <span class="nav-text">PostgreSql</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GreenPlum"><span class="nav-number">1.2.</span> <span class="nav-text">GreenPlum</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#GreenPlumԴ����밲װ"><span class="nav-number">2.</span> <span class="nav-text">GreenPlumԴ����밲װ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#׼������"><span class="nav-number">2.1.</span> <span class="nav-text">׼������</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#����u�rootE��"><span class="nav-number">2.1.1.</span> <span class="nav-text">����û�rootȨ��</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��װgcc-c"><span class="nav-number">2.1.2.</span> <span class="nav-text">��װgcc-c++</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��װgit"><span class="nav-number">2.1.3.</span> <span class="nav-text">��װgit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��װcmake"><span class="nav-number">2.1.4.</span> <span class="nav-text">��װcmake</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��װpip"><span class="nav-number">2.1.5.</span> <span class="nav-text">��װpip</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ȷ���Ѱ�װ�����pythong��"><span class="nav-number">2.1.6.</span> <span class="nav-text">ȷ���Ѱ�װ�����pythonģ��</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ȷ����̬���ӿ⹲��"><span class="nav-number">2.1.7.</span> <span class="nav-text">ȷ����̬���ӿ⹲��</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#֧��-c-11"><span class="nav-number">2.1.8.</span> <span class="nav-text">֧�� c++11</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��װ����"><span class="nav-number">2.1.9.</span> <span class="nav-text">��װ����</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#��װGPORCA"><span class="nav-number">2.2.</span> <span class="nav-text">��װGPORCA</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#clone-GPORCA"><span class="nav-number">2.2.1.</span> <span class="nav-text">clone GPORCA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��װ-gp-xerces"><span class="nav-number">2.2.2.</span> <span class="nav-text">��װ gp-xerces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��װninja"><span class="nav-number">2.2.3.</span> <span class="nav-text">��װninja</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#���밲װGPORCA"><span class="nav-number">2.2.4.</span> <span class="nav-text">���밲װGPORCA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#����GreenPlum"><span class="nav-number">2.2.5.</span> <span class="nav-text">����GreenPlum</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#����"><span class="nav-number">3.</span> <span class="nav-text">����</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#����host�l�"><span class="nav-number">3.1.</span> <span class="nav-text">����host�ļ�</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#�鿴ip"><span class="nav-number">3.1.1.</span> <span class="nav-text">�鿴ip</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#�޸�hosts�l�"><span class="nav-number">3.1.2.</span> <span class="nav-text">�޸�hosts�ļ�</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#�޸�network�l�"><span class="nav-number">3.1.3.</span> <span class="nav-text">�޸�network�ļ�</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#���������б��l���segment�l�"><span class="nav-number">3.2.</span> <span class="nav-text">���������б��ļ���segment�ļ�</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#�����ڴ��������������"><span class="nav-number">3.3.</span> <span class="nav-text">�����ڴ��������������</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#�������V���"><span class="nav-number">3.4.</span> <span class="nav-text">�������Ʋ���</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#�ڵ㲿��"><span class="nav-number">3.5.</span> <span class="nav-text">�ڵ㲿��</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#������������"><span class="nav-number">3.5.1.</span> <span class="nav-text">������������</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#�����������½"><span class="nav-number">3.5.2.</span> <span class="nav-text">�����������½</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��������L¼"><span class="nav-number">3.5.3.</span> <span class="nav-text">��������Ŀ¼</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#������������-1"><span class="nav-number">3.5.4.</span> <span class="nav-text">������������</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��д���ݿ�������l�"><span class="nav-number">3.5.5.</span> <span class="nav-text">��д���ݿ�������ļ�</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#��ʼ�����ݿ�"><span class="nav-number">3.5.6.</span> <span class="nav-text">��ʼ�����ݿ�</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#���ݿ�ʹ��"><span class="nav-number">3.5.7.</span> <span class="nav-text">���ݿ�ʹ��</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TPC-H����"><span class="nav-number">3.5.8.</span> <span class="nav-text">TPC-H����</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-drupal"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yuan Zi</span>

  
<br/>
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共4.0k字</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("KeGHByUO0Y7MPAGIUAQURkdo-gzGzoHsz", "oOJLSQFhGgxbiwOBrFxmeqB1");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

  
    <script type="text/javascript" src="/live2d/script.js"></script>
    <canvas id="live2dcanvas" width="150" height="300" class="live2d"></canvas>
    <style>
      #live2dcanvas {
        position: fixed;
        right: 0px;
        z-index: 999;
        pointer-events: none;
        bottom: -30px;
      }
    </style>
    <script>loadlive2d("live2dcanvas" ,"/live2d/assets/hijiki/hijiki.model.json",0.5)</script>
  

</body>
</html>
